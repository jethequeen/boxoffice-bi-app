version: "3.9"
services:
  seats-sold:
    build: .
    container_name: seats-sold
    restart: unless-stopped
    env_file:
      - .env.txt
    environment:
      - TZ=America/Toronto
      # make headless behave closer to your IDE:
      - CE_ACCEPT_LANG=fr-CA,fr;q=0.9,en;q=0.8
      - CE_BLOCK_ASSETS=0           # allow CSS/JS/images in Docker for stability
      - CE_TIMEOUT_MS=60000         # more generous waits in container
      - DEBUG=pw:api                # optional: verbose Playwright API logs
      # your existing envs ↓
      - RESYNC_MIN=180
      - LOOKAHEAD_H=8
      - BACKPAD_MIN=30
      - FLUSH_MIN=60
      - FLUSH_BATCH=100
      - CHECK_DELAY_SEC=780
      - WINDOW_SEC=60
      - QUIET_START=01:00
      - QUIET_END=10:00
    # Critical for Chromium in containers:
    shm_size: "1gb"
    # Persist browsers (already inside image) and any updates/caches:
    volumes:
      - msplaywright:/ms-playwright
      # - ./logs:/app/logs   # if you want host logs
volumes:
  msplaywright:
